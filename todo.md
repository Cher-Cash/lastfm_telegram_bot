lastfm https://github.com/ItsOnlyCole/LastFM-NowPlaying

1. Надо получать последнюю воспроизведенную песню + артиста, и говорить играет ли она сейчас.

1. Что такое апи? - мы вроде поняли
2. Что такое lastfm - мы вроде поняли
3. есть ли какая то учетка на которой можно проверить - gunlinux
4. Написать тестовый запрос - done
5. избавиться от многопоточности -done
6. отказаться от записи в файл, сделать вывод на экран done
7. и говорить играет ли она сейчас -> done

9. urllib - старого говна - перепиши на requests
10. сделать получение данных по json
  11. Добавить возхможность полчучать данные по json
  12. Добавитьб обработчик json 

----------------------------------------------------

2. Телеграм бота  , куда ты будешь пишать !SONG -> ПЕСНЮ, И ИГРАЕТ ОНА СЕЙЧАС

-----------------------------------------------------

Раз в 30 секунд (cron) - скрипт запускается по расписания
    выясняет играет ли сейчас песня
        если играет, и она не была до этого отправлена 
            отправляем сообщшение в бот

----------------------------------
0. мОЖНО ИСПОЛЬЗОВАТЬ ФУНКЦИИ ИЗ LASTFM.PY ЧТОБЫ ИЗ ЗАНОГО НЕ ПИСАТЬ
1. потыркать ласт фм, потыркать код
2. научится хранить результат последнего вызова
3. print(to_display("еСЛИ НА ДО ЛАТЬ""))
4. пОНЯТЬ ПРИМЕРНО КАК РОБОТАЕТ ТЕЛЕГРАМ ( ПРОВЕСТИ ИСЛЕДОВАНИЕ)

7. A

hotfix_deploy 
1. при отсутсвии файла чтобы не падал
2. не срать в лог
3. срать в логи песню исполнителя
4. скрипт для крона ```
#!/bin/bash

cd /home/leha/lastfm_telegram_bot/
python3 lastfm_bot.py >> log.txt
```

sys.argv ??????
1. получать username, lastfm, chat_id извне и добавление в базу
2. делать запрос lastfm на основе данных пользователя в базе
3. класть в базу результаты выполнения скрипта (песня-исполнитель) в базу
4. избавляемся от temp.txt, считываем последнюю песню с бд
5. хранить в config.py только имя базы


users = all users select
for user in users:
    process(user)

def process(user):
    song = get_current_song(user.lastfm)
    write_song(user, song)
    send_song(user, song)

OOP 101

1. Переписать на новые API от ластфм, чтобы через класс работал бот
2. Пересисать на OOP style lastfm bot

```
def get_all_users():
    users = []
    '''
    dasdasdsa
    das
    dadas
    dsa
    '''
    raw_users = [
        [1, 'name', 'lastfm'],
        [2, 'name', 'lastfm'],
        [3, 'name', 'gunlinux'],
    ]
    for raw_user in raw_users:
        user = User(id=raw_user[0],
                    name=raw_user[1],
                )
        users.append(user)
    return users

users = get_all_users()
for user in users:
    if user.now_paying():
        user.send()


```


basic webview

научится в jinja2 шаблоны

запуск: 
python3 app.py  --debug
переделать ссылки на url_for

Это минисайтик, на котором на flask
главной странице список пользователей
#  /  


у нас все песни которые тип наслушал
(1, 'ОЙ ДА', 'Слава КПСС', 2, '2024-06-08 20:45:28')
# /user/user_id


отбивать 404 если пользователя нет
вынести сложность с получением списка песен в модель


